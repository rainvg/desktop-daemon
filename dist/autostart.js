function __run__(){"use strict";return new Promise(function(e){var r={darwin:path.resolve(process.argv[0],"..","..","..")}[os.platform()],n=new autolaunch({name:"Rain",path:r,isHidden:!0});n.enable(),e()})}function __clean__login_item__(){return new Promise(function(e){var r=new autolaunch({name:"Rain",isHidden:!0});r.disable(),e()})}function __clean__(){"use strict";return new Promise(function(e){if("darwin"===os.platform()){var r=path.resolve(os.homedir(),"Library","LaunchAgents","vg.rain.osx.plist");fs.existsSync(r)&&fs.remove(r),e()}else if("win32"===os.platform()){var n=new registry({hive:registry.HKCU,key:"\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Shell Folders"});n.values(function(r,n){if(!r)for(var i=0;i<n.length;i++)if("Startup"===n[i].name){var s=path.join(n[i].value,"Rain.lnk");fs.existsSync(s)&&fs.remove(s)}e()})}else if("linux"===os.platform()){var i=path.resolve(os.homedir(),".config","upstart","rain.conf");fs.existsSync(i)&&fs.remove(i),e()}})}var autolaunch=require("auto-launch"),fs=require("fs-extra"),os=require("os"),path=require("path"),registry=require("winreg");module.exports=function(){"use strict";__clean__login_item__().then(__clean__).then(__run__)};