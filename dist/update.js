var os=require("os"),path=require("path"),nappy=require("nappy"),needle=require("needle"),electron=require("electron"),pkg=require(path.resolve(__dirname,"..","package.json")),settings={update:{interval:3e5}},_potty,__update__=function(){"use strict";nappy.wait["for"](settings.update.interval).then(nappy.wait.connection).then(function(){console.log("Looking for updates.."),console.log("https://rain.vg/releases/"+pkg.name+"/"+os.type().toLowerCase()+"-"+os.arch().toLowerCase()+"/"+pkg.scheme+"/package"),needle.get("https://rain.vg/releases/"+pkg.name+"/"+os.type().toLowerCase()+"-"+os.arch().toLowerCase()+"/"+pkg.scheme+"/package",function(e,t){console.log("Response is",t.body),e||200!==t.statusCode||JSON.parse(t.body.toString()).version===pkg.version||(console.log("Updating."),_potty.update().then(function(){electron.app.exit(0)})),__update__()})})};module.exports=function(e){_potty=e,__update__()};