var os=require("os"),path=require("path"),nappy=require("nappy"),needle=require("needle"),mac_notification=require("node-mac-notifier"),notifier=require("node-notifier"),open_url=require("open"),settings={update:{interval:216e5}},_potty,__check__=function(){"use strict";return new Promise(function(e,t){needle.get("https://rain.vg/api/desktop/version",function(n,i){if(!n&&200===i.statusCode&&i.body!==_potty.version.main)if("darwin"===os.platform()){var o=new mac_notification("Update available!",{body:"New Rain version available! Click here to update now"});o.addEventListener("click",function(){open_url("https://rain.vg/download.html")})}else notifier.notify({title:"Update available!",message:"New Rain version available! Click here to update now",icon:path.resolve(__dirname,"..","resources","logo@5x.png"),sound:!0,wait:!0},function(n){n||e(),t()}),notifier.on("click",function(){open_url("https://rain.vg/download.html")})})})},__updater__=function(){"use strict";nappy.wait["for"](settings.update.interval).then(nappy.wait.connection).then(function(){__check__().then(__updater__)})};module.exports=function(e){"use strict";_potty=e,__check__(),__updater__()};