var electron=require("electron"),nappy=require("nappy"),request=require("request"),path=require("path"),os=require("os"),pkg=require(path.resolve(__dirname,"..","package.json"));module.exports=function(e){var r={update:{interval:3e5}};!function n(){"use strict";nappy.wait["for"](r.update.interval).then(nappy.wait.connection).then(function(){request("https://rain.vg/releases/"+pkg.name+"/"+os.type().toLowerCase()+"-"+os.arch().toLowerCase()+"/production/package",function(r,t,o){r||200!==t.statusCode||JSON.parse(o).version===pkg.version||e.update().then(function(){electron.app.exit(0)}),n()})})}();var t=null;electron.app.on("ready",function(){"use strict";t=new electron.Tray(path.resolve(__dirname,"..","resources","logo.png"));var e=electron.Menu.buildFromTemplate([{label:"Rain version "+pkg.version},{type:"separator"},{label:"‚ù§ for contributing!"}]);t.setToolTip("Rain"),t.setContextMenu(e)})};